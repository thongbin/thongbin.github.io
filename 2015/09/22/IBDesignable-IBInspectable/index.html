<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>IBDesignable &amp;  IBInspectable | Kelvin Tong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Xcode6开始，Apple提供给开发者两个很给力的宏（在Objective－C是宏，在Swift里是关键字）">
<meta name="keywords" content="IBDesignable &amp;  IBInspectable&#39;">
<meta property="og:type" content="article">
<meta property="og:title" content="IBDesignable &amp;  IBInspectable">
<meta property="og:url" content="http://yoursite.com/2015/09/22/IBDesignable-IBInspectable/index.html">
<meta property="og:site_name" content="Kelvin Tong">
<meta property="og:description" content="Xcode6开始，Apple提供给开发者两个很给力的宏（在Objective－C是宏，在Swift里是关键字）">
<meta property="og:locale" content="Simplified Chinese">
<meta property="og:image" content="http://yoursite.com/2015/09/22/IBDesignable-IBInspectable/images/IBInspectable-runtime-attributes.png">
<meta property="og:image" content="http://yoursite.com/2015/09/22/IBDesignable-IBInspectable/images/IBInspectable-inspectable.png">
<meta property="og:updated_time" content="2018-03-22T07:23:14.916Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="IBDesignable &amp;  IBInspectable">
<meta name="twitter:description" content="Xcode6开始，Apple提供给开发者两个很给力的宏（在Objective－C是宏，在Swift里是关键字）">
<meta name="twitter:image" content="http://yoursite.com/2015/09/22/IBDesignable-IBInspectable/images/IBInspectable-runtime-attributes.png">
  
    <link rel="alternative" href="/atom.xml" title="Kelvin Tong" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Kelvin Tong</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">iOS Developer, S.H.S.F.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="https://about.me/kelvintong">About me</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-IBDesignable-IBInspectable" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/22/IBDesignable-IBInspectable/" class="article-date">
  <time datetime="2015-09-22T03:03:09.000Z" itemprop="datePublished">2015-09-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      IBDesignable &amp;  IBInspectable
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Xcode6开始，Apple提供给开发者两个很给力的宏（在Objective－C是宏，在Swift里是关键字）</p>
<a id="more"></a>
<p>#@IBDesignable<br>顾名思义，从命名上就能看出这个是跟UI开发有关的，自定义视图的时候，当应用到 UIView 或 NSView 子类中的时候，@ IBDesignable 让 Interface Builder 知道它应该在画布上直接渲染视图。你会看到你的自定义视图在每次更改后不必编译并运行你的应用程序就会显示。</p>
<p>标记一个自定义视图为 IBDesignable，只需在类名前加上 @IBDesignable 的前缀（或是 Objective-C 里的 IB_DESIGNABLE 宏）。你的初始化、布置和绘制方法将被用来在画布上渲染你的自定义视图：</p>
<p>#@IBInspectable</p>
<p>IBInspectable 属性提供了访问旧功能的新方式：用户自定义的运行时属性。从目前的身份检查器（identity inspector）中访问，这些属性在 Interface Builder 被整合到 Xcode 之前就可用了。他们提供了一个强有力的机制来配置一个 NIB，XIB，或者 storyboard 实例中的任何键值编码（key-value coded）属性：</p>
<p>User-Defined Runtime Attributes<br><img src="images/IBInspectable-runtime-attributes.png" alt="img"></p>
<p>虽然功能强大，运行时属性可能会使工作很繁琐。一个属性的关键字路径，类型和属性值需要在每个实例设置，没有任何自动完成或输入提示，这就需要前往文档或自定义子类的源代码仔细检查设置。 IBInspectable 属性彻底的解决了这个问题：在 Xcode 6，你现在可以指定任何属性作为可检查项并为你的自定义类建立了一个用户界面。</p>
<p>例如，在一个 UIView 子类里，这些属性用它们的值来更新背景层：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Swift</span><br><span class="line">@IBInspectable var cornerRadius: CGFloat = 0 &#123;</span><br><span class="line">   didSet &#123;</span><br><span class="line">       layer.cornerRadius = cornerRadius</span><br><span class="line">       layer.masksToBounds = cornerRadius &gt; 0</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">@IBInspectable var borderWidth: CGFloat = 0 &#123;</span><br><span class="line">   didSet &#123;</span><br><span class="line">       layer.borderWidth = borderWidth</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">@IBInspectable var borderColor: UIColor? &#123;</span><br><span class="line">   didSet &#123;</span><br><span class="line">       layer.borderColor = borderColor?.CGColor</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>标有 @IBInspectable（或是 Objective-C 中的 IBInspectable），他们就可以很容易在 Interface Builder 的观察面板（inspector panel）里编辑。需要注意的是 Xcode 在这里做了更多的事，属性名称是从 camel- 转换为 title- 模式 并且相关的名称组合在一起：</p>
<p>IBInspectable Attribute Inspector<br><img src="images/IBInspectable-inspectable.png" alt="img"></p>
<p>因为可检查属性仅仅是用户定义的运行时属性顶部的接口，所以支持相同的类型列表：布尔，字符串和数字（即，NSNumber 或任何数值类型），以及 CGPoint、CGSize、CGRect、UIColor 和 NSRange，额外增加了 UIImage。</p>
<p>那些已经熟悉运行时属性的人将注意到在上面的例子中有一些问题。UIColor 是里面唯一支持色彩的类型，而不是原生支持视图 CALayer 的 CGColor。borderColor 会计算 UIColor 属性（通过运行时属性设置）并映射到该层需要的 CGColor。</p>
<p>让现有的类型可观察</p>
<p>内置的 Cocoa 类型如果在 Interface Builder 中的属性检查器中没有列出也可以通过扩展来使属性可视。如果你喜欢圆角，你一定会喜欢这个 UIView 扩展：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Swift</span><br><span class="line">extension UIView &#123;</span><br><span class="line">    @IBInspectable var cornerRadius: CGFloat &#123;</span><br><span class="line">        get &#123;</span><br><span class="line">            return layer.cornerRadius</span><br><span class="line">        &#125;</span><br><span class="line">        set &#123;</span><br><span class="line">            layer.cornerRadius = newValue</span><br><span class="line">            layer.masksToBounds = newValue &gt; 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>变！你创建的任何 UIView 都将有一个可配置的边界半径。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/09/22/IBDesignable-IBInspectable/" data-id="cjf28y40h000f5os5bc0dc5ad" class="article-share-link">Share</a>
      
        <section id="comments">
          <!-- 多说评论框 start -->
          <div class="ds-thread" data-thread-key="post-IBDesignable-IBInspectable" data-title="IBDesignable &amp;  IBInspectable" data-url="http://yoursite.com/2015/09/22/IBDesignable-IBInspectable/"></div>
          <!-- 多说评论框 end -->
          <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
          <script type="text/javascript">
          var duoshuoQuery = {short_name:'thongbin'};
            (function() {
              var ds = document.createElement('script');
              ds.type = 'text/javascript';ds.async = true;
              ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
              ds.charset = 'UTF-8';
              (document.getElementsByTagName('head')[0]
               || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
            </script>
          <!-- 多说公共JS代码 end -->
        </section>
        
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IBDesignable-IBInspectable/">IBDesignable &  IBInspectable'</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/10/19/gitignorefile/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Git 全局忽略 不需要的版本跟踪的文件
        
      </div>
    </a>
  
  
    <a href="/2015/08/20/zhu-ti-geng-huan-she-ji-si-lu/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">[转载]主题更换设计思路</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/summary/">summary</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IBDesignable-IBInspectable/">IBDesignable &  IBInspectable'</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/IBDesignable-IBInspectable/" style="font-size: 10px;">IBDesignable &  IBInspectable'</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/10/19/gitignorefile/">Git 全局忽略 不需要的版本跟踪的文件</a>
          </li>
        
          <li>
            <a href="/2015/09/22/IBDesignable-IBInspectable/">IBDesignable &amp;  IBInspectable</a>
          </li>
        
          <li>
            <a href="/2015/08/20/zhu-ti-geng-huan-she-ji-si-lu/">[转载]主题更换设计思路</a>
          </li>
        
          <li>
            <a href="/2015/04/23/octopress-xie-wen-zhang/">octopress 写文章</a>
          </li>
        
          <li>
            <a href="/2014/09/22/zai-xcode6li-shi-yong-shi-liang-tu-yi/">在Xcode6里使用矢量图-译</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Kelvin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="https://about.me/kelvintong" class="mobile-nav-link">About me</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>